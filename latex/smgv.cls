%
% smgv.cls
%
% Do not edit this file if you use it for typesetting the paper for MG&V.
%
\newcommand{\MGVclassDate}{2025/05/05} % version: YYYY/MM/DD, for internal use only
%
% Marticle.sty 16-Mar-88  modified for international usage
%
% Modified by J.Schrod (TeXsys).
% according to the suggestion of H.Partl (TU Wien) in german.sty
% to make caption names adaptable to other languages.
% Modified by Z.Bien, U.Krus, L.Chmielewski for MG&V.
%
% The up-to-date version can be found at https://mgv.sggw.edu.pl/technical
%
\NeedsTeXFormat{LaTeX2e}[1995/12/01]
\ProvidesClass{smgv}

% 2025/03/17: options [review] and [publish]
\newif\ifREVIEW \REVIEWfalse
\DeclareOption{publish}{\REVIEWfalse}
\DeclareOption{review}{\REVIEWtrue}

\DeclareOption*{\PassOptionsToClass{\CurrentOption}{article}}
\ProcessOptions\relax
\LoadClass[b5paper,twoside]{article} % dodane b5 2007/10/26

\typeout{%
Document Style `article' <16 Mar 88>,
international version <17 Oct 89>.
Modified by Z.Bien, U.Krus until <12 Jul 2012>, L.Chmielewski, for MG&V.
}

\RequirePackage{lmodern} % to have proper fonts in case [T1]{fontenc} is used

\RequirePackage{ifthen}

% 2022/05/07: all configuration of captions made with package caption
\RequirePackage[font={footnotesize}]{caption}
\captionsetup[figure]{position=bottom}
\captionsetup[figure]{skip=8pt}
\captionsetup[table]{position=top}
\captionsetup[table]{skip=7pt}
\captionsetup[longtable]{position=top}
\captionsetup[longtable]{skip=7pt}
\captionsetup[lstlisting]{position=top}
\captionsetup[lstlisting]{skip=7pt}
\captionsetup{format=hang}
\captionsetup{labelsep=period}

% Suggestions how to treat subcaptions
% Packages cannot be loaded in the class due to a clash.
% They must be loaded in the .tex template.

% 2025/01/19: Package subcaption can be accepted. 
% Here it is suggested how to customise it to support an acceptable look.
%\RequirePackage{subcaption}
%\subcaptionsetup{labelfont=bf,font=scriptsize} % harmonized, to some extent, with previous customs in MG&V

% 2025/01/19: Package subfig will be treated as the target and basis package for subcaptions.
% It will be suggested here how to customise it to support an acceptable look.
%\RequirePackage{subfig}
%\captionsetup[table]{position=top}
%\captionsetup[figure]{position=bottom}

\def\@ptsize{0} \@namedef{ds@11pt}{\def\@ptsize{1}}
\@namedef{ds@12pt}{\def\@ptsize{2}}
\def\ds@twoside{\@twosidetrue \@mparswitchtrue} \def\ds@draft{\overfullrule
5pt}
%\@options % deleted 2025/05/05 - this was doubling the \ProcessOptions command
%
% modified art10.sty incorporated below
%---------------------------------------------------------------
%
% art10.sty 22-Dec-87   modified for international usage
%
% Modified by J.Schrod (TeXsys).
% according to the suggestion of H.Partl (TU Wien) in german.sty
% to make caption names adaptable to other languages.
% Modified by Z.Bien.
\lineskip 1pt \normallineskip 1pt
\def\baselinestretch{1}

\def\@normalsize{\@setsize\normalsize{12pt}\xpt\@xpt
\abovedisplayskip 3.5pt plus1.5pt minus4.5pt\belowdisplayskip\abovedisplayskip
\abovedisplayshortskip \z@ plus3pt\belowdisplayshortskip 2.5pt plus1.5pt
minus3pt\let\@listi\@listI}
\def\small{\@setsize\small{11pt}\ixpt\@ixpt
\abovedisplayskip 8.5pt plus 3pt minus 4pt\belowdisplayskip \abovedisplayskip
\abovedisplayshortskip \z@ plus2pt\belowdisplayshortskip 4pt plus2pt minus 2pt
\def\@listi{\leftmargin\leftmargini
\topsep .5pt plus .5pt minus 1pt\parsep 1pt
plus .5pt minus .5pt
\itemsep \parsep}}
\def\footnotesize{\@setsize\footnotesize{9.5pt}\viiipt\@viiipt
\abovedisplayskip 6pt plus 2pt minus 4pt\belowdisplayskip \abovedisplayskip
\abovedisplayshortskip \z@ plus 1pt\belowdisplayshortskip 3pt plus 1pt minus
2pt
\def\@listi{\leftmargin\leftmargini
\topsep .5pt plus .5pt minus 1pt\parsep 1pt
plus .5pt minus .5pt
\itemsep \parsep}}
\def\scriptsize{\@setsize\scriptsize{8pt}\viipt\@viipt}
\def\tiny{\@setsize\tiny{6pt}\vpt\@vpt}
\def\large{\@setsize\large{14pt}\xiipt\@xiipt}
\def\Large{\@setsize\Large{18pt}\xivpt\@xivpt}
\def\LARGE{\@setsize\LARGE{22pt}\xviipt\@xviipt}
\def\huge{\@setsize\huge{25pt}\xxpt\@xxpt}
\def\Huge{\@setsize\Huge{30pt}\xxvpt\@xxvpt}
\normalsize
\if@twoside
\oddsidemargin 1.385cm \evensidemargin 1.385cm \marginparwidth 107pt
\else \oddsidemargin 63pt \evensidemargin 63pt%44pt,
 \marginparwidth 90pt
\fi
\marginparsep 11pt
 \topmargin 27pt \headheight 12pt \headsep 25pt \footskip 30pt%bylo50pt

\textheight = 43\baselineskip
\advance\textheight by \topskip
\textwidth 345pt \columnsep 10pt \columnseprule 0pt

\footnotesep 6.65pt
\skip\footins 9pt plus 4pt minus 2pt
\floatsep 13pt plus 2pt minus 2pt \textfloatsep 20pt plus 2pt minus 4pt
\intextsep 13pt plus 2pt minus 2pt \dblfloatsep 13pt plus 2pt
minus 2pt \dbltextfloatsep 20pt plus 2pt minus 4pt
\@fptop 0pt plus 1fil \@fpsep 8pt plus 2fil \@fpbot 0pt plus 1fil
\@dblfptop 0pt plus 1fil \@dblfpsep 8pt plus 2fil \@dblfpbot 0pt plus 1fil
\marginparpush 5pt
\parskip 0pt plus 1pt \parindent 15pt \partopsep 2pt plus 1pt minus 1pt
\@lowpenalty 51 \@medpenalty 151 \@highpenalty 301
\@beginparpenalty -\@lowpenalty \@endparpenalty -\@lowpenalty \@itempenalty
-\@lowpenalty

\def\part{\par \addvspace{4ex} \@afterindentfalse \secdef\@part\@spart}
\def\partname{Part} % <----------
\def\@part[#1]#2{\ifnum \c@secnumdepth >\m@ne \refstepcounter{part}
\addcontentsline{toc}{part}{\thepart \hspace{1em}#1}\else
\addcontentsline{toc}{part}{#1}\fi { \parindent 0pt \raggedright
 \ifnum \c@secnumdepth >\m@ne \Large \bf \partname{}
 \thepart \par\nobreak \fi \huge
\bf #2\markboth{}{}\par } \nobreak \vskip 3ex \@afterheading }
\def\@spart#1{{\parindent 0pt \raggedright
 \huge \bf
 #1\par} \nobreak \vskip 3ex \@afterheading }
\def\section{\@startsection {section}{1}{\z@}{-3.8ex plus -1ex minus
 -.2ex}{2.3ex plus .2ex}{\normalsize\bf}}
\def\subsection{\@startsection{subsection}{2}{\z@}{-2.75ex plus -1ex minus
 -.2ex}{1.25ex plus .2ex}{\normalsize\bf}}
\def\subsubsection{\@startsection{subsubsection}{3}{\z@}{-1.5ex plus %-2.75ex
-1ex minus -.2ex}{.75ex plus .2ex}{\normalsize\bf}} %1.25ex plus ...
% paragraph has new line after the title, subparagraph has not. LChmielewski, 2018.10.06
\def\paragraph{\@startsection{paragraph}{4}{0em}{-1.1ex plus -.5ex minus -.2ex}{.05ex}{\normalsize\bf}}
\def\subparagraph{\@startsection{subparagraph}{5}{\z@}{0.5ex \@plus1ex \@minus .2ex}{-1em}{\normalfont\normalsize\bfseries}}

\setcounter{secnumdepth}{3}

\def\appendix{\par
 \setcounter{section}{0}
 \setcounter{subsection}{0}
 \def\thesection{\Alph{section}}}

\leftmargini 13pt
\leftmarginii 10pt \leftmarginiii 6pt \leftmarginiv 5pt \leftmarginv 4pt
\leftmarginvi 4pt
\leftmargin\leftmargini
\labelsep 2pt
\labelwidth\leftmargini\advance\labelwidth-\labelsep
\def\@listI{\labelwidth\leftmargini\advance\labelwidth-\labelsep
\leftmargin\leftmargini \parsep 1pt plus 1pt minus .5pt
%\topsep 2pt plus 1pt minus 2pt
\topsep .5pt plus .5pt minus 2pt
\parskip1pt
%\itemsep 2pt plus 1pt minus .5pt
\itemsep 0pt plus 1pt minus .5pt}
\let\@listi\@listI
\@listi
\def\@listii{\leftmargin\leftmarginii
 \labelwidth\leftmarginii\advance\labelwidth-\labelsep
% \topsep 2pt plus 1pt minus .5pt
\parskip1pt
 \topsep .5pt plus .5pt minus .5pt
 \parsep .5pt plus .5pt minus .5pt
% \itemsep \parsep
\itemsep 0pt plus 1pt minus .5pt}
\def\@listiii{\leftmargin\leftmarginiii
 \labelwidth\leftmarginiii\advance\labelwidth-\labelsep
 \topsep .5pt plus .5pt minus 1pt
 \parsep \z@ \partopsep 1pt plus 0pt minus 1pt
 \itemsep 0pt plus 1pt minus .5pt}
\def\@listiv{\leftmargin\leftmarginiv
 \labelwidth\leftmarginiv\advance\labelwidth-\labelsep}
\def\@listv{\leftmargin\leftmarginv
 \labelwidth\leftmarginv\advance\labelwidth-\labelsep}
\def\@listvi{\leftmargin\leftmarginvi
 \labelwidth\leftmarginvi\advance\labelwidth-\labelsep}
% ------------------------------------------------------
% end of modified art10.sty
%
\def\labelenumi{\theenumi.}
\def\theenumi{\arabic{enumi}}
\def\labelenumii{(\theenumii)}
\def\theenumii{\alph{enumii}}
\def\p@enumii{\theenumi}
\def\labelenumiii{\theenumiii.}
\def\theenumiii{\roman{enumiii}}
\def\p@enumiii{\theenumi(\theenumii)}
\def\labelenumiv{\theenumiv.}
\def\theenumiv{\Alph{enumiv}}
\def\p@enumiv{\p@enumiii\theenumiii}

\def\labelitemi{$\bullet$}
\def\labelitemii{$\circ$}
\def\labelitemiii{\bf -}
\def\labelitemiv{$\cdot$}

\def\verse{\let\\=\@centercr
 \list{}{\itemsep\z@ \itemindent -1.5em\listparindent \itemindent
 \rightmargin\leftmargin\advance\leftmargin 1.5em}\item[]}
\let\endverse\endlist
\def\quotation{\list{}{\listparindent 1.5em
 \itemindent\listparindent
 \rightmargin\leftmargin \parsep 0pt plus 1pt}\item[]}
\let\endquotation=\endlist
\def\quote{\list{}{\rightmargin\leftmargin}\item[]}
\let\endquote=\endlist

\def\descriptionlabel#1{\hspace\labelsep \bf #1}
\def\description{\list{}{\labelwidth\z@ \itemindent-\leftmargin
 \let\makelabel\descriptionlabel}}
\let\enddescription\endlist

\def\theequation{\arabic{equation}}

\def\titlepage{\@restonecolfalse\if@twocolumn\@restonecoltrue\onecolumn
 \else \newpage \fi \thispagestyle{empty}\c@page\z@}
\def\endtitlepage{\if@restonecol\twocolumn \else \newpage \fi}

\arraycolsep 5pt \tabcolsep 6pt \arrayrulewidth .4pt \doublerulesep 2pt
\tabbingsep \labelsep

\skip\@mpfootins = \skip\footins
\fboxsep = 3pt \fboxrule = .4pt

\def\thepart{\Roman{part}} \def\thesection {\arabic{section}}
\def\thesubsection {\thesection.\arabic{subsection}}
\def\thesubsubsection {\thesubsection .\arabic{subsubsection}}
\def\theparagraph {\thesubsubsection.\arabic{paragraph}}
\def\thesubparagraph {\theparagraph.\arabic{subparagraph}}
\def\@pnumwidth{1.55em}
\def\@tocrmarg {2.55em}
\def\@dotsep{4.5}
\setcounter{tocdepth}{3}

\def\contentsname{Contents} % <----------
\def\tableofcontents{\section*{\contentsname
\@mkboth{\uppercase{\contentsname}}{\uppercase{\contentsname}}}
 \@starttoc{toc}}
\def\l@part#1#2{\addpenalty{\@secpenalty}
 \addvspace{2.25em plus 1pt} \begingroup
 \@tempdima 3em \parindent \z@ \rightskip \@pnumwidth \parfillskip
-\@pnumwidth
 {\large \bf \leavevmode #1\hfil \hbox to\@pnumwidth{\hss #2}}\par
 \nobreak \endgroup}
\def\l@section#1#2{\addpenalty{\@secpenalty} \addvspace{1.0em plus 1pt}
\@tempdima 1.5em \begingroup
 \parindent \z@ \rightskip \@pnumwidth
 \parfillskip -\@pnumwidth
\bf \leavevmode \advance\leftskip\@tempdima \hskip -\leftskip #1\nobreak\hfil
\nobreak\hbox to\@pnumwidth{\hss #2}\par
 \endgroup}

\def\l@subsection{\@dottedtocline{2}{1.5em}{2.3em}}
\def\l@subsubsection{\@dottedtocline{3}{3.8em}{3.2em}}
\def\l@paragraph{\@dottedtocline{4}{7.0em}{4.1em}}
\def\l@subparagraph{\@dottedtocline{5}{10em}{5em}}
\def\listfigurename{List of Figures} % <----------
\def\listoffigures{\section*{\listfigurename\@mkboth
{\uppercase{\listfigurename}}{\uppercase{\listfigurename}}}\@starttoc{lof}}
\def\l@figure{\@dottedtocline{1}{1.5em}{2.3em}}
\def\listtablename{List of Tables} % <----------
\def\listoftables{\section*{\listtablename\@mkboth
{\uppercase{\listtablename}}{\uppercase{\listtablename}}}\@starttoc{lot}}
\let\l@table\l@figure

\def\refname{References} % <----------
\def\thebibliography#1{\section*{\refname\@mkboth
 {\uppercase{\refname}}{\uppercase{\refname}}}\list
 {[\arabic{enumi}]}{\settowidth\labelwidth{[#1]}\leftmargin\labelwidth
 \advance\leftmargin\labelsep
 \usecounter{enumi}
 \itemsep=.1cm
 \footnotesize
 \frenchspacing
 }
 \def\newblock{\hskip .11em plus .33em minus .07em}
 \sloppy\clubpenalty4000\widowpenalty4000
 \sfcode`\.=1000\relax}
\let\endthebibliography=\endlist

\newif\if@restonecol
\def\indexname{Index} % <----------
\def\theindex{\@restonecoltrue\if@twocolumn\@restonecolfalse\fi
 \columnseprule \z@
 \columnsep 35pt\twocolumn[\section*{\indexname}]
 \@mkboth{\uppercase{\indexname}}{\uppercase{\indexname}}%
 \thispagestyle{plain}\parindent\z@
 \parskip\z@ plus .3pt\relax\let\item\@idxitem}
\def\@idxitem{\par\hangindent 40pt}
\def\subitem{\par\hangindent 40pt \hspace*{20pt}}
\def\subsubitem{\par\hangindent 40pt \hspace*{30pt}}
\def\endtheindex{\if@restonecol\onecolumn\else\clearpage\fi}
\def\indexspace{\par \vskip 10pt plus 5pt minus 3pt\relax}
\def\footnoterule{\kern-3\p@
 \hrule width .4\columnwidth
 \kern 2.6\p@}

\long\def\@makefntext#1{\parindent 1em\noindent
 \hbox to 1.8em{\hss$^{\@thefnmark}$}#1}

\setcounter{topnumber}{2}
\def\topfraction{1}
\setcounter{bottomnumber}{2}
\def\bottomfraction{1}
\setcounter{totalnumber}{4}
\def\textfraction{0}
\def\floatpagefraction{.6}
\setcounter{dbltopnumber}{2}
\def\dbltopfraction{.7}
\def\dblfloatpagefraction{.5}

\def\thefigure{\@arabic\c@figure}
\def\fps@figure{tbp}
\def\ftype@figure{1}
\def\ext@figure{lof}
\def\figurename{Fig.} % <----------
\def\fnum@figure{\figurename{} \thefigure}
\def\figure{\@float{figure}}
\def\endfigure{\end@float}
\@namedef{figure*}{\@dblfloat{figure}}
\@namedef{endfigure*}{\end@dblfloat}
\def\thetable{\@arabic\c@table}
\def\fps@table{tbp}
\def\ftype@table{2}
\def\ext@table{lot}
\def\tablename{Tab.} % <----------
\def\fnum@table{\tablename{} \thetable}
\def\table{\@float{table}}
\def\endtable{\end@float}
\@namedef{table*}{\@dblfloat{table}}
\@namedef{endtable*}{\end@dblfloat}

\def\maketitle{%
 % 2025/04/25 this info is automatically added with remarks set to true, 
 % before any remarks, even those in the title
 \edreminfo
 \par
 \begingroup
 \def\thefootnote{\fnsymbol{footnote}}
 \def\@makefnmark{\hbox
 to 0pt{$^{\@thefnmark}$\hss}}
 \if@twocolumn
 \twocolumn[\@maketitle]
 \else \newpage
 \global\@topnum\z@ \@maketitle \fi\thispagestyle{plain}\@thanks
 \endgroup
 \setcounter{footnote}{0}
 \let\maketitle\relax
 \let\@maketitle\relax
 \gdef\@thanks{}\gdef\@author{}\gdef\@title{}\let\thanks\relax
 \makeabstract%
 \pagestyle{myheadings}\thispagestyle{myfheadings}% 2025/02/10: moved here - commands for data in footer
}
\def\@maketitle{\newpage
 \null
 \ifSHOWREMARKS{\mbox{}\vspace{-2.50ex}}\fi% 2025/04/24 to compensate for footnotemark from edreminfo if remarks are on
 \begin{center}\penalty0\vspace*{-5mm}\penalty0
 {\large\sc\@title \par} \vskip 1.5em {\small \lineskip .5em
 \begin{tabular}[t]{c} \normalsize\@author
 \end{tabular}\par}
 \vskip 1em {\small \@date} \end{center}
 \par
 \vskip 1.1ex% 2025/02/07: changed from 1.5em to make room for submitted, accepted, etc.
}
\def\abstractname{Abstract} % <----------
\def\abstract{\if@twocolumn
\section*{\abstractname}
\else \small
\begin{center}
{\bf \abstractname\vspace{-.5em}\vspace{0pt}}
\end{center}
\quotation
\fi}
\def\endabstract{\if@twocolumn\else\endquotation\fi}
\mark{{}{}}

\if@twoside \def\ps@headings{\let\@mkboth\markboth
\def\@oddfoot{}\def\@evenfoot{}\def\@evenhead{\rm \thepage\hfil \sl
\leftmark}\def\@oddhead{\hbox{}\sl \rightmark \hfil
\rm\thepage}\def\sectionmark##1{\markboth {\uppercase{\ifnum \c@secnumdepth
>\z@
 \thesection\hskip 1em\relax \fi ##1}}{}}\def\subsectionmark##1{\markright
{\ifnum \c@secnumdepth >\@ne
 \thesubsection\hskip 1em\relax \fi ##1}}}
\else \def\ps@headings{\let\@mkboth\markboth
\def\@oddfoot{}\def\@evenfoot{}\def\@oddhead{\hbox {}\sl \rightmark \hfil
\rm\thepage}\def\sectionmark##1{\markright {\uppercase{\ifnum \c@secnumdepth
>\z@
 \thesection\hskip 1em\relax \fi ##1}}}}
\fi
\def\ps@myheadings{\let\@mkboth\@gobbletwo
\def\@oddhead{\hbox{}\sl\rightmark \hfil
\rm\thepage}\def\@oddfoot{}\def\@evenhead{\rm \thepage\hfil\sl\leftmark\hbox
{}}\def\@evenfoot{}\def\sectionmark##1{}\def\subsectionmark##1{}}

\def\today{\ifcase\month\or
 January\or February\or March\or April\or May\or June\or
 July\or August\or September\or October\or November\or December\fi
 \space\number\day, \number\year}
\ps@plain \pagenumbering{arabic} \onecolumn \if@twoside\else\raggedbottom\fi
%
% end of modified article.sty
% ------------------------------------------------------------------------
% macros concerning section numbering
%
% adapted from LATEX.TEX
% optional argument goes to the heading
% obligatory argument goes to the text and the table of content
\def\@sect#1#2#3#4#5#6[#7]#8{\ifnum #2>\c@secnumdepth
     \def\@svsec{}\else
     \refstepcounter{#1}\edef\@svsec{\csname the#1\endcsname.\hskip .3em }\fi
%     \refstepcounter{#1}\edef\@svsec{}\fi
     \@tempskipa #5\relax
      \ifdim \@tempskipa>\z@
        \begingroup #6\relax
          \@hangfrom{\hskip #3\relax\@svsec}{\interlinepenalty \@M #8\par}
        \endgroup
       \csname #1mark\endcsname{#7}\addcontentsline
         {toc}{#1}{\ifnum #2>\c@secnumdepth \else
                      \protect\numberline{\csname the#1\endcsname.}\fi
                    #8}\else
        \def\@svsechd{#6\hskip #3\@svsec #8\csname #1mark\endcsname
                      {#7}\addcontentsline
                           {toc}{#1}{\ifnum #2>\c@secnumdepth \else
                             \protect\numberline{\csname the#1\endcsname}\fi
                       #8}}\fi
     \@xsect{#5}}
%
%macros concerning theorem-like structures
%
\def\ztt{\hskip 1.1\fontdimen2\font}
\def\@begintheorem#1#2{%
\parsep 1pt plus .5pt minus .5pt\topsep .5pt
plus .3pt minus 2pt\itemsep 1pt plus .5pt minus .5pt
\trivlist \item[\hskip \labelsep{\bf #1\ #2.\ztt}]}
\def\@opargbegintheorem#1#2#3{%
\parsep 1pt plus .5pt minus .5pt\topsep .5pt
plus .3pt minus 2pt\itemsep 1pt plus .5pt minus .5pt
\trivlist\item[\hskip \labelsep{\bf #1\ #2\ (#3).\ztt}]}

%
% caption modification
% commented out by L. Chmielewski on May 7, 2022
% because now the parameters are set with the package "caption"
%
%\def\caption{\refstepcounter\@captype \@dblarg{\@caption\@captype}}
%
%  \long\def\@caption#1[#2]#3{\par\addcontentsline{\csname
%      ext@#1\endcsname}{#1}{\protect\numberline{\csname
%  the#1\endcsname}{\ignorespaces #2}}\begingroup
%    \@parboxrestore
%    %\footnotesize
%    \@makecaption{\csname fnum@#1\endcsname}{\ignorespaces #3}\par
%\endgroup}
%
%
%\newbox\@capbox
%\long\def\@makecaption#1#2{
%  % font size for captions
%  %\tiny
%  \footnotesize
%  %\small
%  %\normal
%  \vskip 9pt% 10pt
%  \setbox\@tempboxa\hbox{#1.\enspace #2}
%  \setbox\@capbox\hbox{#1.\enspace }
%% \ifdim \wd\@tempboxa >\hsize \hangafter1\hangindent \wd\@capbox
%  \ifdim \wd\@tempboxa >\hsize \hangafter1\hangindent 3.3em
%  \noindent\box\@capbox #2\par \else \hbox
%  to\hsize{\hfil\box\@tempboxa\hfil} \vskip 7pt
%  \fi%
%}

%
%other important macros and parameters
%
\newtoks\autor
\newtoks\tytul
\newtoks\pages
\newtoks\rok
\newtoks\tom
\newtoks\numer
\newtoks\zgloszono
\newtoks\akceptowano
\newtoks\opublikowano
\newtoks\mgvdoi
\newtoks\symboldoi
\newtoks\lang
\newtoks\abstract
\newtoks\keywords
\textwidth=13.44cm
\textheight=17.18cm
\def\bibyear#1{\smallbreak\item[] {\bf #1}\nobreak}
\def\zt{\hskip 1.5\fontdimen2\font}
\def\ps{\hskip .5\fontdimen2\font}
\def\psm{\hskip -.5\fontdimen2\font}
\def\zldots{,\ps\ldots\ps,\ps }
\def\noin{\noindent}
\def\refname{\normalsize\bf References}
\newcounter{li}
% 2023/02/24 Include amsthm before theorem-like environments are defined, otherwise the proof environment cannot be used
\RequirePackage{amsthm}
\newtheorem{lemma}{\hspace*{\parindent}Lemma}[section]
\newtheorem{theorem}{\hspace*{\parindent}Theorem}[section]
\newtheorem{corollary}{\hspace*{\parindent}Corollary}[section]
\newtheorem{definition}{\hspace*{\parindent}Definition}[section]
\newtheorem{remark}{\hspace*{\parindent}Remark}[section]
\newtheorem{proposition}{\hspace*{\parindent}Proposition}[section]
\newtheorem{ex}{\hspace*{\parindent}Example}[section]
%pagestyle:
%   myfheadings -- for the title page, and
%   myheadings -- for the other pages
%
% 2021/09/13: numer DOI w stopce
\newcommand{\printmgvdoi}{\ifthenelse{\isundefined{\symboldoi}}{}{DOI:\ps\href{https://doi.org/\the\mgvdoi}{\the\mgvdoi}\hspace{0.075em}.}}
\newcommand{\MGVfoottext}{\scriptsize\rm \href{\mgvwww}{Machine GRAPHICS \& VISION}\ps{} \the\tom(\the\numer):\the\pages, \the\rok.\ \printmgvdoi}
\newcommand{\MGVpdfsubjecttext}{Machine Graphics \& Vision \the\tom(\the\numer):\pageref{pierwsza}--\pageref{ostatnia}, \the\rok}
\def\ps@myfheadings{\let\@mkboth\@gobbletwo
\def\ps{\hskip .5\fontdimen2\font}
\def\@oddhead{\parbox[b]{13.44cm}{}}%
\def\@evenhead{\parbox[b]{13.44cm}{}}%
\def\@oddfoot{\parbox[b]{13.44cm}{\vspace*{1cm}\MGVfoottext}}% footer for 1st page if at odd page
\def\@evenfoot{\parbox[b]{13.44cm}{\vspace*{1cm}\MGVfoottext}}% footer for 1st page if at even page
\def\sectionmark##1{}\def\subsectionmark##1{}}
\def\ps@myheadings{\let\@mkboth\@gobbletwo
\def\@oddhead{\parbox[b]{13.44cm}{\vskip-3pt\hbox{}\scriptsize
\it\the\autor \hfill
\normalsize\rm\thepage}}%
\def\@oddfoot{\parbox[b]{13.44cm}{\vspace*{1cm}\MGVfoottext}}% footer for any page if at odd page
\def\@evenhead{\parbox[b]{13.44cm}{\rm
\thepage\hfill\scriptsize\it\the\tytul\hbox{}}}%
\def\@evenfoot{\parbox[b]{13.44cm}{\vspace*{1cm}\hfill\MGVfoottext}}% footer for any page if at even page
\def\sectionmark##1{}\def\subsectionmark##1{}}

% 2007/10/26: probujemy umiescic na B5:
\RequirePackage[textwidth=13.44cm,textheight=17.18cm,paperheight=23.4cm,
 paperwidth=16.2cm,ignoreheadfoot,centering]{geometry}

% 2016/01/26: niezbedne pakiety
\RequirePackage{graphicx}
\RequirePackage{hyperref}
\RequirePackage{doi}

\RequirePackage{enumitem} % 2025/02/08: handy for changing distances in lists

% 2023/10/28: abstract and keywords are generated, not formatted by the user as before
% 2023/05/02 (beginning of 32{3/4}): No full stop after the word Abstract. Key words changed to Keywords, no indentation before them
% 2024/11/14 commands related to headings moved here, to be executed after \maketitle
% 2025/02/08 dates and license added
% 2025/02/10 abstract, keywords and dates plus license are made by \makeabstract
\newcommand{\makeabstract}{%
\makedateslicense
\noindent{\footnotesize{\bf Abstract}\ \ {\the\abstract} \par}%
{\medskip{\noindent\footnotesize{\bf Keywords:}\ \ {\the\keywords.} \par}}
\hypersetup{pdfsubject={\MGVpdfsubjecttext},}%
\hypersetup{pdfkeywords={\the\keywords},}%
}
% 2023/02/24: \MSCcodes{year}{codes}: give the year of the Mathematics Subject Classification System and the codes
\newcommand{\MSCcodes}[2]{\medskip{\noindent\footnotesize{\bf Mathematics Subject Classification {#1}:}\ \ {#2}\par}}

% 2017/11/18, 2023/01/10: macro for producing a note on the author containing the photo and the text on the author
% example call (after the bibliography): \authornote{file_with_the_photo}{GivenName GivenName2 FamilyName}{text on the Author}
\newcommand{\authornote}[3]{\mbox{}\vspace{0.035\textwidth}\\[0.01ex]{}\noindent%
\begin{minipage}[c]{0.274\textwidth}\centering%
  \includegraphics[width=25mm]{#1}%
\end{minipage}\hfill%
\begin{minipage}[c]{0.725\textwidth}\footnotesize%
  {\bf #2}\hspace{0.33em} #3 %
\end{minipage}%
}
% 2020/08/18, 2023/01/10: macro for producing a note on the author containing the text on the author only, no photo
% example call (after the bibliography}: \authornotetextonly{GivenName GivenName2 FamilyName}{text on the Author}
\newcommand{\authornotetextonly}[2]{\mbox{}\vspace{0.035\textwidth}\\[0.01ex]{}\noindent%
\begin{minipage}[c]{1.000\textwidth}\footnotesize%
  {\bf #1}\hspace{0.33em} #2 %
\end{minipage}%
}
% 2025/01/25
\newcommand{\ind}{\mbox{}\hspace{1.75em}} % macro to make an indentation of a paragraph in the author notes

% 2020/12/28: short "unit space" for separating numbers from units
\newcommand{\usp}{\ensuremath{\,}}

% 2025/02/08: Operator Name: typeset as an operator, with straight Roman font
\RequirePackage{amsmath}
\newcommand{\on}[1]{{\ensuremath{\operatorname{{#1}}}}} 
% 2025/02/08: Upright d, a differential operator
\newcommand{\ud}{{\ensuremath{\textrm{d}}}}
% 2025/05/05: shorthands for text backslash, math backslash
\newcommand{\tbs}{\textbackslash}
\newcommand{\bs}{\tbs}
\newcommand{\mbs}{\backslash}

% 2020/06/13-2021/10/16: making editorial comments in the paper - to be used only by Editors of MG&V
% 2021/10/16: resigning from the option [dvipsnames] in xcolor package which caused clashes, defining own colours
% BEGIN making editorial comments in the paper - to be used only by Editors of MG&V
\RequirePackage{xcolor} % Colours modified on 2025/05/05 
\definecolor{ColorInsert}{rgb}{0,0.5,0.1}
\definecolor{ColorRemove}{rgb}{0.9,0,0}
\definecolor{ColorRemark}{rgb}{0.7,0.45,0}
\RequirePackage{hyperref}
\RequirePackage[normalem]{ulem} % implements the crossing out of a text
\RequirePackage{etoolbox} % implements among others the test if the parameter is empty
% Editorial remark % Clarified 2024/06/18 
\newcommand{\edrembody}[1]{\protect{\footnote{\color{ColorRemark}{\underline{\bf Remark}\hspace{.5em}#1}}}}% 2024/06/18 Remark instead for Editorial remark
\newcommand{\edrem}[1]{\edrembody{#1}}
\newcommand{\edreminfo}{% Modified 2023/01/26 (text corrected), 2024/10/18 (text corrected), 2024/11/09 (no footnote mark), 
  % 2024/12/27 (correction of explanations); 2025/03/08 (comments become remarks, commands not changed); 2025/03/17 (shortened); 2025/05/05 (corrected).%
  \footnotetext{\color{ColorRemark}{\underline{\bf Information on editorial interventions}\hspace{.5em}%
  In this version of the paper the editorial interventions: remarks and replacements (some with remarks) are displayed. Remarks are placed in footnotes.
  In the replacements, the deleted text is marked as \rpl{red crossed-out}{}, and the proposed text as \rpl{}{green underlined}.
  Sometimes the replacements can badly fit in the lines of text, or comments continued in the next page can lose colour; this is unavoidable.\\
  \indent The interventions are shown if in the preamble the command {\tt \textbackslash{}SHOWREMARKStrue}\usp{} is present.
  Otherwise, remarks are not shown and replacements are accepted.\\
  \indent Single corrections or remarks can be accepted or rejected by simply editing the text of the source file.
  Also, a~single correction or remark can be accepted by adding~`{\tt a}' at the end of its name, or rejected by adding~`{\tt r}'.
  For example, {\tt \textbackslash{}rpl\{$\cdot$\}\{$\cdot$\}} can be
  accepted by changing its name to {\tt \textbackslash{}rpla\{$\cdot$\}\{$\cdot$\}}
  or rejected by changing its name to {\tt \textbackslash{}rplr\{$\cdot$\}\{$\cdot$\}}.\\
  \indent More information can be found in the file {\tt smgv.cls}.%
}}}
% Replacement - replacement of the text with another text
\newcommand{\rplbody}[2]{\protect{{\color{ColorRemove}\sout{#1}}{\color{ColorInsert}\uline{#2}}}}
\newcommand{\rpl}[2]{\rplbody{#1}{#2}}
% Replacement commented - replacement of the text with another text, with a remark (before 2025/03/08 called comment, now remark for easier searching of editorial interventions)
\newcommand{\rplcbody}[3]{\protect{{\color{ColorRemove}\sout{#1}}{\color{ColorInsert}\uline{#2}}\footnote{\color{ColorRemark}{\uline{\bf Remark}\hspace{.5em}{#3}}}}}
\newcommand{\rplc}[3]{\rplcbody{#1}{#2}{#3}}

% Global hiding the replacements and comments
\newif\ifSHOWREMARKS
% moved to \AtBeginDocument

% single type of remark can be removed or type of correction can be accepted by putting in the source an uncommented line as follows:
%\renewcommand{\edrem}[1]{} % uncomment this line to hide editorial remarks
%\renewcommand{\edreminfo}{} % uncomment this line to hide info for editorial remarks
%\renewcommand{\rpl}[2]{{#2}} % uncomment this line to hide the replacements and to leave only the inserted text
%\renewcommand{\rplc}[3]{{#2}} % uncomment this line to hide the commented replacements and to leave only the inserted text

% Important replacements and comments which are not hidden by global hiding
\newcommand{\edremi}[1]{\edrembody{#1}}
\newcommand{\rpli}[2]{\rplbody{#1}{#2}}
\newcommand{\rplci}[3]{\rplcbody{#1}{#2}{#3}}
% Accepting or rejecting a particular replacement - add 'a' to accept or 'r' to reject at the end of the command name
% 2023/06/10: inserting \mbox{} instead of negative \hspace if second parameter is empty
\newcommand{\edrema}[1]{} % accept the comment - hide it
\newcommand{\rpla}[2]{\ifstrempty{#2}{\mbox{}}{#2}} % accept this change - show changed text only, in black
\newcommand{\rplr}[2]{\protect{{\color{ColorRemove}{#1}}}} % reject this change - show original text, in ColorRemove, not crossed
\newcommand{\rplca}[3]{\ifstrempty{#2}{\mbox{}}{#2}} % accept this change - show changed text only, in black
\newcommand{\rplcr}[3]{\protect{{\color{ColorRemove}{#1}}}} % reject this change - show original text, in ColorRemove, not crossed
% END making editorial comments in the paper - to be used only by Editors of MG&V

% 2018/03/05: make it easier to add DOIs to the bibliography items, if BibTeX is not used
% It references to the protected www site of the doi system, different from \doi{},
% and uses typewriter font, as the \url{} does.
% use second version if the displayed text is different from DOI, for example if "\_" is needed
\newcommand{\mdoi}[1]{\href{https://doi.org/#1}{\tt doi:#1}}
\newcommand{\mdoit}[2]{\href{https://doi.org/#1}{\tt doi:#2}}

% 2015/12/11: makra rozpoczynajace i konczace artykul
% Poczatek: wstawic tuz po \begin{document}, a po nim wstawic: \rok{} \tom{} numer{} \maketitle \thispagestyle{myfheadings} \pagestyle{myheadings}
\newcommand{\MGVfirstpage}{\label{pierwsza}\pages{\pageref{pierwsza}--\pageref{ostatnia}}\date{}}
% Koniec: wstawic tuz przed \end{document}.
% 2018.01.08: poprawka \value{page} zamiast blednego kodu
% 2021.01.06: poprawka - usuniecie zbednej spacji po \pagestyle{empty}\null}
\newcommand{\MGVlastpage}{\label{ostatnia}\ifthenelse{\isodd{\value{page}}}{ \newpage\pagestyle{empty}\null}{}}

% 2016/01/26: makra rozpoczynajace i konczace artykul wstawiane sa automatycznie
% 2022/02/14: zaktualizowano adres www MG&V na sggw.edu.pl

\AtBeginDocument{%
% before end of preamble
\clubpenalty=10000 % sieroty
\widowpenalty=10000 % wdowy
\brokenpenalty=10000 % przenoszenia
\renewcommand{\topfraction}{0.99}
\renewcommand{\bottomfraction}{0.99}
\renewcommand{\textfraction}{0.01}
\renewcommand{\floatpagefraction}{0.85}
\ifSHOWREMARKS\else
  \renewcommand{\edrem}[1]{} % uncomment this line to hide editorial remarks
  \renewcommand{\edreminfo}{} % uncomment this line to hide info for editorial remarks
  \renewcommand{\rpl}[2]{{#2}} % uncomment this line to hide the replacements and to leave only the inserted text
  \renewcommand{\rplc}[3]{{#2}} % uncomment this line to hide the commented replacements and to leave only the inserted text
\fi
\ifREVIEW % 2025/03/18: options [review] and [publish]
  \RequirePackage[mathlines]{lineno}
  \linenumbers
\fi
} % \AtBeginDocument


\AfterEndPreamble{%
% just after \begin{document}; needs etoolbox
\MGVfirstpage%
\ifthenelse{\equal{\the\lang}{US}}%
  {\newcommand{\SMGVtoday}{\SMGVtodayday{} \SMGVtodaymonth{} \SMGVtodayyear{}}% US
  }{%
  \newcommand{\SMGVtoday}{\SMGVtodaymonth{} \SMGVtodayday{}, \SMGVtodayyear{}}% UK
  }
  \ifREVIEW % 2025/03/18: options [review] and [publish]
    \newcommand{\authorshidden}{Information on authors hidden in the version for review}
    \newcommand{\affiliationshidden}{Information on affiliations hidden in the version for review}
    \autor{\authorshidden}
    \author{\authorshidden\\[2ex]{\footnotesize\sl\affiliationshidden}\\[4ex]}
    \renewcommand{\authornote}[3]{\noindent\centerline{\authorshidden}}
    \renewcommand{\authornotetextonly}[2]{\noindent\centerline{\authorshidden}}
  \fi
} % \AfterEndPreamble

\AtEndDocument{%
% just before \end{document}
\MGVlastpage%
} % \AtEndDocument

% 2023/10/28: data w formacie UK: MMM DD, YYYY or US: DD MMM YYYY
\RequirePackage[en-GB]{datetime2}
\newcommand{\SMGVtodayday}{\DTMsavenow{SMGVdate}\DTMfetchday{SMGVdate}}
\newcommand{\SMGVtodaymonth}{\DTMenglishshortmonthname{\month}}
\newcommand{\SMGVtodayyear}{\DTMsavenow{SMGVdate}\DTMfetchyear{SMGVdate}}

% 2023/10/27: this was moved from the template to the class
\RequirePackage[nocompress]{cite} % to have numbers sorted, but not compressed, in a multi-citation, like [1,10,11,12,27]

% 2023/10/27: for very nice scientific tables
\RequirePackage{booktabs}
\RequirePackage{siunitx}

% 2023/05/03: Defining colors for hyperlinks in PDF
\definecolor{MgvCiteColor}{rgb}{0.00,0.50,0.00}
\definecolor{MgvUrlColor}{rgb}{0.00,0.00,0.50}
\definecolor{MgvLinkColor}{rgb}{0.70,0.00,0.00}
\definecolor{MgvFileColor}{rgb}{0.50,0.00,0.50} % dark magenta
\hypersetup{
  pdffitwindow=true,pdfnewwindow=true,plainpages=false,linktocpage=true,breaklinks=true,colorlinks=true,
  linkcolor=MgvLinkColor,citecolor=MgvCiteColor,urlcolor=MgvUrlColor,filecolor=MgvFileColor,
}
% 2do: check how the field 'pdfsubject' can be filled in automatically. Typical commands and saveboxes do not work.

% 2025/02/08: A recommended path for images; no problem if authors place them in main dir
\graphicspath{{Images/}} % do not delete this line; keep images in a subdirectory so named

% 2025/02/07: ORCID icon and link to the ORCID web site of the author
\RequirePackage{orcidlink}
\newcommand{\MGVorcid}[1]{\hspace{0.1em}\raisebox{0.50ex}{\orcidlink{#1}}}

% 2023/05/04: old ORCID Id remains for backward compatibility
% Makes an ORCID icon with the link to the ORCID web site of the given user
% similar to that made by the Springer's class "llncs".
% Uses an official ORCID logo from the ORCID web site at
% "https://orcid.org/trademark-and-id-display-guidelines".
% The file 'ORCID-iD_icon-128x128.png' from https://orcid.org/trademark-and-id-display-guidelines
% must be present in the LaTeX path.
\IfFileExists{ORCID-iD_icon-128x128.png}{}{\ClassWarning{smgv}{Icon 'ORCID-iD_icon-128x128.png' from https://orcid.org/trademark-and-id-display-guidelines should be in the LaTeX path}}
\newcommand{\MGVorcidID}[1]{{\href{https://orcid.org/#1}{\IfFileExists{ORCID-iD_icon-128x128.png}{%
\hspace{0.15em}\raisebox{.35ex}{\includegraphics[height=1.6ex]{ORCID-iD_icon-128x128.png}}\hspace{0.15em}}{%
\hspace{0.15em}\textsuperscript{ORCID[#1]}\hspace{0.15em}}}}}

% 2025/02/08: dates and lincence between the title and the abstract
\RequirePackage{ccicons}
\newcommand{\printlicence}{\href{https://creativecommons.org/licenses/by-nc/4.0/}{CC BY-NC 4.0 \raisebox{0.19ex}[0ex][0ex]{\ccbync}}}
\newcommand{\datspc}{\hspace{1.1em}} % space after each date
\newcommand{\makedateslicense}{\noindent{\tiny%
\ifthenelse{\equal{\the\zgloszono}{}}{}{{\bf Submitted:} \the\zgloszono{}\datspc}%
\ifthenelse{\equal{\the\akceptowano}{}}{}{{\bf Accepted:} \the\akceptowano{}\datspc}%
\ifthenelse{\equal{\the\opublikowano}{}}{}{{\bf Published:} \the\opublikowano{}\datspc}%
\hfill {{\bf \ifthenelse{\equal{\the\lang}{US}}{License}{Licence}:} \printlicence}
\par\medskip}}

% last lines of the class
\newcommand{\pierwszastrona}[1]{\setcounter{page}{#1}}
\newcommand{\mgvwww}{https://doi.org/10.22630/MGV}% Changed from https://mgv.sggw.edu.pl on 2025/01/22
\mgvdoi{10.22630/MGV.\the\rok.\the\tom.\the\symboldoi}
\rok{YYYY}
\tom{VV}
\numer{N} % a właściwie zeszyt. Jeśli jest to numer łączony, to np. 3/4
\zgloszono{} % Format examples: {Sep 25, 2025}, {Dec 11, 2025} - like in the OJS website
\akceptowano{} 
\opublikowano{} % albo \opublikowano{\SMGVtoday}, wtedy jest to dzień kompilacji
\symboldoi{N.P} % e.g. {3.1}: only number of issue as a single digit and running number of paper; no year, no volume
\lang{} % {US} for American English, {UK} or anything else for British English - used in dates and in "License/Licence"
\abstract{{\bf ??? Place the abstract command in the preamble or before the {\tt \textbackslash{}maketitle}.}}
\keywords{{\bf ??? Place the keywords command in the preamble or before the {\tt \textbackslash{}maketitle}}}
